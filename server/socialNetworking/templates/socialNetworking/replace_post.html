{% load static %}
{% load custom_filter %}
{% load crispy_forms_tags %}
{% for post in post_list %}
            <!-- Post Container -->
            <div class="post-container left-content" style="display: flex; justify-content: space-between;">
                {% if not post.author_of_posts.profileImage %}
                    <img src="{% static 'images/default_profile_image.png' %}" alt="Profile Picture" class="post-profile-pic">
                {% else %}
                    <img src="{{ post.author_of_posts.profileImage }}" alt="Profile Picture" class="post-profile-pic">
                {% endif %}
                
                {% if post.shared_body %}
                    <!-- info of the sharer -->
                    <div>
                        <b>{{ post.shared_user }} </b> reposted at <i>{{ post.shared_on }}</i>
                        <p><i>{{ post.shared_body }}</i></p>
                    </div>
                    <hr>
                    <!-- original post -->
                    <div>
                        <p><b>Name: </b><a href="{% url 'user-profile' pk=post.author_of_posts.pk %}" class="profile-link">{{ post.author_of_posts.displayName }}</a></p>
                        <p><b>Title: </b>{{ post.Title }}</p>
                        <p><b>Date: </b><i>{{ post.published_at }}</i></p>
                        {% if post.content %}
                            {% if post.contentType == 'image/jpeg;base64' %}
                                <img src="{{ post.url|add:'/image' }}" alt="{{ post.title }}" class="img-fluid" style="max-width: 100px; height:100px">
                            {% elif post.contentType == 'image/png;base64' %}
                                <img src="{{ post.url|add:'/image' }}" alt="{{ post.title }}" class="img-fluid" style="max-width: 100px; height:100px">
                            {% endif %}
                        {% endif %}

                    </div>
                
                {% else %}
                    <div class="post-content">
                        <p><b>Name: </b><a href="{% url 'user-profile' pk=post.author_of_posts.pk %}" class="profile-link">{{ post.author_of_posts.displayName }}</a></p>
                        <p><b>Title: </b> {{ post.title }}</p>
                        <p><b>Date: </b><i>{{ post.published_at }}</i></p>
                        {% if post.content %}
                            {% if post.contentType == 'image/jpeg;base64' %}
                                <img src="{{ post.url|add:'/image' }}" alt="{{ post.title }}" class="img-fluid" style="max-width: 100px; height:100px">
                            {% elif post.contentType == 'image/png;base64' %}
                                <img src="{{ post.url|add:'/image' }}" alt="{{ post.title }}" class="img-fluid" style="max-width: 100px; height:100px">
                            {% elif post.contentType == 'text/plain' %}
                                <pre>{{ post.content|decode_utf8}}</pre>
                            {% elif post.contentType == 'text/markdown'%}
                                <pre>{{ post.content|decode_markdown_to_html|safe }}</pre>
                            {% endif %}
                        {% endif %}
                    </div>
                {% endif %}
                
                <!-- To print child comments:
                <b>Comments:</b>
                    {% for comment in post.comment_set.all %}
                        <p>{{ comment.comment }} - {{ comment.comment_author }} 
                            <form method="POST" action="{% url 'comment-like' post.pk comment.pk %}">
                                {% csrf_token %}
                                <input type="hidden" name="next" value="{{ request.path }}">
                                <button class="btn btn-success btn-sm" type="submit">
                                    <span>Like</span>
                                    <span>{{ comment.likes.all.count }}</span>
                                </button>
                            </form>
                        </p>
                    {% endfor %}
                 -->
                <form id="like-form">
                    {% csrf_token %}
                    <div class="post-buttons" id="{{ post.pk }}">
                        <button type="button" onclick="likeAction('{{ post.pk }}', 'numLikes-{{ post.pk }}')" id="like-btn-{{ post.pk }}" style="color: rgb(0, 0, 0); background-color: transparent; border: none; text-decoration: none;">
                            <i class="fas fa-heart"></i>
                            <span id="numLikes-{{ post.pk }}">{{ post.num_likes }}</span>
                        </button>                        
                        <button type="button" class="btn position-relative" style="color: rgb(0, 0, 0); background-color: transparent; border: none; text-decoration: none;"
                                onclick="location.href='{% url 'post-detail' post.pk %}'">
                            <i class="fas fa-comment"></i> Comment: {{ total_comments }}
                        </button>
                        <!-- Not be able to share friends only posts of others friends only post-->
                        {% if post.visibility != "FRIENDS" %}
                        <button type="button" onclick="location.href='{% url 'share-post' post.pk %}'" style="color: rgb(3, 3, 3);background-color: transparent; text-decoration: none; border: none;">
                            <i class="fas fa-share"></i> Share
                        </button>
                        {% endif %}
                    </div>
                </form> 
            </div>
    {% endfor %}